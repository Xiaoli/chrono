// chrono.js
// version : 0.0.3
// author : Wanasit T.
// license : MIT
(function(){var chrono={};chrono.parsers={},chrono.importantdays={},chrono.parse=function(e,t,n){var r=this.IntegratedParser(e,t,n);return r.execAll(),r.results()},chrono.parseDate=function(e,t,n){var r=this.parse(e,t,n);return r.length>=1?r[0].startDate:null};if(typeof exports=="undefined"){var moment=window.moment;window.chrono=chrono}else{var fs=require("fs"),moment=require("./moment");eval(fs.readFileSync(__dirname+"/parsers/ParseResult.js")+""),eval(fs.readFileSync(__dirname+"/parsers/Parser.js")+""),eval(fs.readFileSync(__dirname+"/parsers/IntegratedParser.js")+"");var parser_dirs=fs.readdirSync(__dirname+"/parsers");parser_dirs=parser_dirs.filter(function(e){return!e.match(/\./)});for(var i in parser_dirs){var dirname=parser_dirs[i],parser_files=fs.readdirSync(__dirname+"/parsers/"+dirname);for(var j in parser_files){var filename=parser_files[j];if(!filename.match(/\.js$/))continue;eval(fs.readFileSync(__dirname+"/parsers/"+dirname+"/"+filename)+"")}}module.exports=chrono}})(),function(){function e(e){this.year=e.year,this.month=e.month,this.day=e.day,this.hour=e.hour,this.minute=e.minute,this.second=e.second,this.date=function(){var e=moment(new Date(this.year,this.month,this.day));return e.hours(this.hour),e.minutes(this.minute),e.seconds(this.second),e.toDate()}}function t(t){this.start=new e(t.start),this.startDate=this.start.date(),t.end&&(this.end=new e(t.end),this.endDate=this.end.date()),this.referenceDate=t.referenceDate,this.index=t.index,this.text=t.text,this.concordance=t.concordance,t.timezoneOffset&&(this.timezoneOffset=t.timezoneOffset)}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";chrono.DateComponents=e,chrono.ParseResult=t}(),function(){function e(e,t,n){var r=0,i=e,s=!1,o=[],u={};return u.pattern=function(){return/./i},u.extract=function(e,t){return null},u.results=function(){return o},u.finished=function(){return s},u.checkOverlapResult=function(e,t,n){if(t.end||n.end)return null;var r=t.index+t.text.length,i=n.index,s=e.substring(r,i),o=/^\s*(to|\-)\s*$/i;if(!s.match(o))return null;var u=t.text+s+n.text;return moment(n.startDate).diff(moment(t.startDate))>0?new chrono.ParseResult({referenceDate:t.ref,index:t.index,start:t.start,end:n.start,text:u,referenceDate:t.referenceDate}):new chrono.ParseResult({referenceDate:t.ref,index:t.index,start:n.start,end:t.start,text:u,referenceDate:t.referenceDate})},u.extractTime=function(e,t){var n=/\s*(at)?\s*([0-9]{1,2})((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?/i,r=/\s*(\-|\~|\〜|to)?\s*([0-9]{1,2})((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?/i;if(e.length<=t.index+t.text.length)return null;e=e.substr(t.index+t.text.length);var i=e.match(n);if(!i||e.indexOf(i[0])!=0)return null;var s=0,o=0,u=i[2];u=parseInt(u);if(i[10]){if(u>12)return null;i[10].toLowerCase()=="pm"&&(u+=12)}if(i[5]){s=i[5],s=parseInt(s);if(s>=60)return null}if(i[8]){o=i[8],o=parseInt(o);if(o>=60)return null}t.text=t.text+i[0],t.start.hour==undefined&&(t.start.hour=u,t.start.minute=s,t.start.second=o),e=e.substr(i[0].length);var i=e.match(r);if(!i||e.indexOf(i[0])!=0)return t.end&&t.end.hour==undefined&&(t.end.hour=u,t.end.minute=s,t.end.second=o),new chrono.ParseResult(t);var s=0,o=0,u=i[2];u=parseInt(u);if(i[10]){if(u>12)return null;i[10].toLowerCase()=="pm"&&(u+=12)}if(i[5]){s=i[5],s=parseInt(s);if(s>=60)return null}if(i[8]){o=i[8],o=parseInt(o);if(o>=60)return null}return t.text=t.text+i[0],t.end?(t.end.hour=u,t.end.minute=s,t.end.second=o):(t.end=JSON.parse(JSON.stringify(t.start)),t.end.hour=u,t.end.minute=s,t.end.second=o),new chrono.ParseResult(t)},u.extractConcordance=function(e,t){var n=30;return preText=e.substr(0,t.index),preText=preText.replace(/(\r\n|\n|\r)/gm," "),preText=preText.replace(/(\s+)/gm," "),preText.length>n?preText="..."+preText.substr(preText.length-n+3,n-3):preText=preText.substr(0,n),posText=e.substr(t.index+t.text.length),posText=posText.replace(/(\r\n|\n|\r)/gm," "),posText=posText.replace(/(\s+)/gm," "),posText.length>n?posText=posText.substr(0,n-3)+"...":posText=posText.substr(0,n),t.concordance=preText+t.text+posText,new chrono.ParseResult(t)},u.exec=function(){if(s)return null;var t=i.search(this.pattern());if(t<0)return s=!0,null;var n=t+r,u=this.extract(e,n);if(u){if(o.length>0){var a=o[o.length-1],f=this.checkOverlapResult(e,a,u);u=f||u}if(u.start.hour===undefined||u.end&&u.end.hour===undefined){var l=this.extractTime(e,u);u=l||u}this.extractConcordance(e,u),o.push(u)}return i=i.substr(t+1),r=n+1,u},u.execAll=function(){while(!this.finished())this.exec()},u}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";chrono.Parser=e}(),function(){function e(e,n,r,i){r=r||{},n=n||new Date,i=i||Object.keys(chrono.parsers);var s=chrono.Parser(e,n,r),o=0,u=[],a=[];for(var f=0;f<i.length;f++)chrono.parsers[i[f]]&&u.push(new chrono.parsers[i[f]](e,n,r));return s.results=function(){return a},s.finished=function(){return o>=u.length},s.exec=function(){if(o>=u.length)return;var e=u[o],n=e.exec();return n&&t(a,n),e.finished()&&o++,n},s}function t(e,t){var n=0;while(n<e.length&&e[n].index<t.index)n++;if(n<e.length){var r=n;while(r<e.length&&e[r].index<t.index+t.text.length){if(e[r].text.length>=t.text.length)return;r++}e.splice(n,r-n)}if(n-1>=0){var i=e[n-1];if(t.index<i.index+i.text.length){if(i.text.length>=t.text.length)return;e.splice(n-1,1),n-=1}}return e.splice(n,0,t),e}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";chrono.IntegratedParser=e}(),function(){function n(n,r,i){i=i||{},r=r||new Date;var s=chrono.Parser(n,r,i);return s.pattern=function(){return e},s.extract=function(n,i){var s=this.results(),o=s[s.length-1];if(o&&i<o.index+o.text.length)return null;var u=n.substr(i).match(e);if(u==null){finished=!0;return}var n=u[0];n=u[0].substr(0,u[0].length-u[4].length);var a=u[2],f=u[3];f=f.toLowerCase();var l=t[f];if(l===undefined)return null;var c=moment(r).clone();if(a)a=a.toLowerCase(),a=="last"?c.day(l-7):a=="next"?c.day(l+7):a=="this"&&c.day(l);else{var h=c.day();l>h?c.day(l):c.day(l+7)}return new chrono.ParseResult({referenceDate:r,text:n,index:i,start:{day:c.date(),month:c.month(),year:c.year()}})},s}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/((this|last|next)\s*)?(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)(\W|$)/i,t={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};chrono.parsers.DayOfWeekParser=n}(),function(){function t(t,n,r){r=r||{},n=n||new Date;var i=chrono.Parser(t,n,r);return i.pattern=function(){return e},i.extract=function(t,r){var s=this.results(),o=s[s.length-1];if(o&&r<o.index+o.text.length)return null;var u=t.substr(r).match(e);if(u==null){finished=!0;return}var a=u[0].toLowerCase();a=u[0].substr(0,u[0].length-u[7].length);var f=null,l=a.toLowerCase();if(l=="today")f=moment(n).clone();else if(l=="tomorrow")f=moment(n).clone().add("d",1);else if(l=="yesterday")f=moment(n).clone().add("d",-1);else if(l.match("last"))f=moment(n).clone().add("d",-1);else if(l.match("ago")){var c=u[2];c=parseInt(c),f=moment(n).clone().add("d",-c)}else f=moment(n).clone(),a="";var h=new chrono.ParseResult({referenceDate:n,text:a,index:r,start:{day:f.date(),month:f.month(),year:f.year()}}),p=i.extractTime(t,h);return h=p||h,l.match("night")&&(p?p.start.hour<12&&(f.add("d",1),h.start.day=f.date(),h.start.month=f.month(),h.start.year=f.year(),h=new chrono.ParseResult(h)):(h.start.day=f.date()+1,h.start.hour=0,h.start.minute=0,h.start.second=0,h=new chrono.ParseResult(h))),h},i}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/(today|tomorrow|yesterday|last\s*night|([1-9]+)\s*day(s)\s*ago|([0-9]{1,2})(\.|\:|\：)([0-9]{1,2}))(\W|$)/i;chrono.parsers.GeneralDateParser=t}(),function(){function t(t,n,r){r=r||{},n=n||new Date;var i=chrono.Parser(t,n,r);return i.pattern=function(){return e},i.extract=function(t,r){var i=this.results(),s=i[i.length-1];if(s&&r<s.index+s.text.length)return null;var o=t.substr(r).match(e);if(o==null){finished=!0;return}var t=o[0];t=o[0].substr(0,o[0].length-o[4].length);var u=moment(t,"YYYY-MM-DD");return new chrono.ParseResult({referenceDate:n,text:t,index:r,start:{day:u.date(),month:u.month(),year:u.year()}})},i}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})(\W|$)/i;chrono.parsers.InternationalStandardParser=t}(),function(){function n(n,r,i){i=i||{},r=r||new Date;var s=chrono.Parser(n,r,i);s.pattern=function(){return t},s.extract=function(n,i){var s=this.results(),o=s[s.length-1];if(o&&i<o.index+o.text.length)return null;var u=null;n=n.substr(i),originalText=n;var a=n.match(e);if(a&&n.indexOf(a[0])==0){n=a[0],n=a[0].substr(0,a[0].length-a[12].length),originalText=n,a[4]&&(n=n.replace(a[4],"")),a[5]&&(n=n.replace(a[5],""));var f=a[10];f=parseInt(f),f<100?f>20?f=null:f+=2e3:a[11]&&(n=n.replace(a[11],""),f-=543),n=n.replace(a[10]," "+f),u=moment(n,"DD MMMM YYYY");if(!u)return null}else{a=n.match(t);if(!a)return null;var n=a[0];n=a[0].substr(0,a[0].length-a[10].length),originalText=n,a[4]&&(n=n.replace(a[4],"")),a[5]&&(n=n.replace(a[5],"")),u=moment(n,"DD MMMM");if(!u)return null;u.year(moment(r).year());var l=u.clone().add("y",1),c=u.clone().add("y",-1);Math.abs(l.diff(moment(r)))<Math.abs(u.diff(moment(r)))?u=l:Math.abs(c.diff(moment(r)))<Math.abs(u.diff(moment(r)))&&(u=c)}if(a[7]){var h=parseInt(a[7]),p=parseInt(a[3]),d=u.clone();return u.date(p),d.date(h),u.format("D")!=a[3]?null:d.format("D")!=a[7]?null:new chrono.ParseResult({referenceDate:r,text:originalText,index:i,start:{day:u.date(),month:u.month(),year:u.year()},end:{day:d.date(),month:d.month(),year:d.year()}})}return u.format("D")!=a[3]?null:new chrono.ParseResult({referenceDate:r,text:originalText,index:i,start:{day:u.date(),month:u.month(),year:u.year()}})};var o=s.checkOverlapResult;s.checkOverlapResult=function(t,n,r){var i=o(t,n,r);return i&&(n.text.match(e)&&!r.text.match(e)&&(r.start.year=n.start.year,r=new chrono.ParseResult(r)),r.text.match(e)&&!n.text.match(e)&&(n.start.year=r.start.year,n=new chrono.ParseResult(n)),i=o(t,n,r)),i};var u=s.extractTime;return s.extractTime=function(e,t){var n=/(\,|\(|\s)*(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)(\,|\)|\s)*/i;if(e.length<=t.index+t.text.length)return null;var r=e.substr(t.index+t.text.length),i=r.match(n);return i&&r.indexOf(i[0])==0&&(t.text=t.text+i[0]),u.call(this,e,t)},s}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)\s*,?\s*)?([0-9]{1,2})(st|nd|rd|th)?(\s*(to|\-)?\s*([0-9]{1,2})(st|nd|rd|th)?)?\s*(January|Jan|February|Feb|March|Mar|April|Apr|May|June|Jun|July|Jul|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)(\s*[0-9]{2,4})(\s*BE)?(\W|$)/i,t=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)\s*,?\s*)?([0-9]{1,2})(st|nd|rd|th)?(\s*(to|\-)?\s*([0-9]{1,2})(st|nd|rd|th)?)?\s*(January|Jan|February|Feb|March|Mar|April|Apr|May|June|Jun|July|Jul|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)(\W|$)/i;chrono.parsers.MonthNameLittleEndianParser=n}(),function(){function n(n,r,i){i=i||{},r=r||new Date;var s=chrono.Parser(n,r,i);s.pattern=function(){return t},s.extract=function(n,i){var s=this.results(),o=s[s.length-1];if(o&&i<o.index+o.text.length)return null;var u=null;n=n.substr(i),originalText=n;var a=n.match(e);if(a&&n.indexOf(a[0])==0){var n=a[0];originalText=n,n=n.replace(a[1],""),n=n.replace(a[3],a[3]+" "),a[4]&&(n=n.replace(a[4],"")),a[9]&&(n=n.replace(a[9],"")),a[10]&&(n=n.replace(",",""));if(a[12]){var f=a[11];f=" "+(parseInt(f)-543),n=n.replace(a[12],""),n=n.replace(a[11],f)}u=moment(n,"MMMM DD YYYY");if(!u)return null}else{a=n.match(t);if(!a)return null;n=a[0].substr(0,a[0].length-a[10].length),originalText=n,n=n.replace(a[1],""),n=n.replace(a[3],a[3]+" "),a[4]&&(n=n.replace(a[4],"")),u=moment(n,"MMMM DD");if(!u)return null;u.year(moment(r).year());var l=u.clone().add("y",1),c=u.clone().add("y",-1);Math.abs(l.diff(moment(r)))<Math.abs(u.diff(moment(r)))?u=l:Math.abs(c.diff(moment(r)))<Math.abs(u.diff(moment(r)))&&(u=c)}if(a[4]){var h=parseInt(a[8]),p=parseInt(a[5]),d=u.clone();return u.date(p),d.date(h),u.format("D")!=a[5]?null:d.format("D")!=a[8]?null:new chrono.ParseResult({referenceDate:r,text:originalText,index:i,start:{day:u.date(),month:u.month(),year:u.year()},end:{day:d.date(),month:d.month(),year:d.year()}})}return u.format("D")!=a[8]?null:new chrono.ParseResult({referenceDate:r,text:originalText,index:i,start:{day:u.date(),month:u.month(),year:u.year()}})};var o=s.checkOverlapResult;s.checkOverlapResult=function(t,n,r){var i=o(t,n,r);return i&&(n.text.match(e)&&!r.text.match(e)&&(r.start.year=n.start.year,r=new chrono.ParseResult(r)),r.text.match(e)&&!n.text.match(e)&&(n.start.year=r.start.year,n=new chrono.ParseResult(n)),i=o(t,n,r)),i};var u=s.extractTime;return s.extractTime=function(e,t){var n=/(\,|\(|\s)*(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)(\,|\)|\s)*/i;if(e.length<=t.index+t.text.length)return null;var r=e.substr(t.index+t.text.length),i=r.match(n);return i&&r.indexOf(i[0])==0&&(t.text=t.text+i[0]),u.call(this,e,t)},s}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?(,)?(\s*[0-9]{4})(\s*BE)?/i,t=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?([^0-9]|$)/i;chrono.parsers.MonthNameMiddleEndianParser=n}(),function(){function t(t,n,r){r=r||{},n=n||new Date;var i=chrono.Parser(t,n,r);return i.pattern=function(){return e},i.extract=function(t,r){var i=this.results(),s=i[i.length-1];if(s&&r<s.index+s.text.length)return null;var o=t.substr(r).match(e);if(o==null)return;var t=o[0].substr(o[1].length,o[0].length-o[5].length),u=t;r+=o[1].length;var a=null,f=o[4];f=parseInt(f),f<100&&(f>50?f=f+2500-543:f+=2e3,t=o[2]+"/"+o[3]+"/"+f),a=moment(t,"MM/DD/YYYY");if(!a||a.format("D")!=o[3]){a=moment(t,"DD/MM/YYYY");if(!a||a.format("D")!=o[2])return null}return new chrono.ParseResult({referenceDate:n,text:u,index:r,start:{day:a.date(),month:a.month(),year:a.year()}})},i}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/(\W|^)([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4}|[0-9]{2})(\W|$)/i;chrono.parsers.SlashParser=t}(),function(){function n(n,r,i){i=i||{},r=r||new Date;var s=chrono.parsers.THGeneralDateParser(n,r,i);return s.pattern=function(){return e},s.extract=function(n,i){var s=this.results(),o=s[s.length-1];if(o&&i<o.index+o.text.length)return null;var u=n.substr(i).match(e);if(u==null)return;var n=u[0],a=u[2];a=a.toLowerCase();var f=t[a];if(f===undefined)return null;var l=moment(r).clone(),c=u[3];return c=="นี้"?l.day(f):c=="หน้า"?l.day(f+7):c=="ที่แล้ว"?l.day(f-7):(l.day(f),n=u[0].substr(0,u[0].length-u[3].length)),new chrono.ParseResult({referenceDate:r,text:n,index:i,start:{day:l.date(),month:l.month(),year:l.year()}})},s}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/(วัน)?(อาทิตย์|จันทร์|อังคาร|พุธ|พฤหัสบดี|ศุกร์|เสาร์)(หน้า|นี้|ที่แล้ว|.|$)/i,t={"อาทิตย์":0,"จันทร์":1,"อังคาร":2,"พุธ":3,"พฤหัสบดี":4,"ศุกร์":5,"เสาร์":6};chrono.parsers.THDayOfWeekParser=n}(),function(){function t(t,n,r){r=r||{},n=n||new Date;var i=chrono.Parser(t,n,r);return i.pattern=function(){return e},i.extract=function(t,r){var s=this.results(),o=s[s.length-1];if(o&&r<o.index+o.text.length)return null;var u=t.substr(r).match(e);if(u==null){finished=!0;return}var a=u[0].toLowerCase();a=u[0].substr(0,u[0].length-u[5].length);var f=null;if(a=="วันนี้")f=moment(n).clone();else if(a=="พรุ่งนี้")f=moment(n).clone().add("d",1);else if(a=="เมื่อวาน")f=moment(n).clone().add("d",-1);else if(a=="เมื่อคืน")f=moment(n).clone().add("d",-1);else{var l=u[2];l=parseInt(l),f=moment(n).clone().add("d",-l)}var c=new chrono.ParseResult({referenceDate:n,text:a,index:r,start:{day:f.date(),month:f.month(),year:f.year()}}),h=i.extractTime(t,c);return c=h||c,a.match("คืน")&&(h?h.start.hour<12&&(f.add("d",1),c.start.day=f.date(),c.start.month=f.month(),c.start.year=f.year(),c=new chrono.ParseResult(c)):(c.start.day=f.date()+1,c.start.hour=0,c.start.minute=0,c.start.second=0,c=new chrono.ParseResult(c))),c},i}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/(วันนี้|พรุ่งนี้|เมื่อวาน|เมื่อคืน|([1-9]+)\s*(วัน|คืน)(ก่อน|ที่แล้ว))(\W|$)/i;chrono.parsers.THGeneralDateParser=t}(),function(){function r(r,i,s){s=s||{},i=i||new Date;var o=chrono.parsers.THGeneralDateParser(r,i,s);return o.pattern=function(){return t},o.extract=function(r,s){var o=this.results(),u=o[o.length-1];if(u&&s<u.index+u.text.length)return null;var a=null;r=r.substr(s),originalText=r;var f=r.match(e);if(f&&r.indexOf(f[0])==0){r=f[0],r=f[0].substr(0,f[0].length-f[8].length),originalText=r;var l=f[7];l=parseInt(l),f[3]&&f[3]=="ค.ศ."?l<=30?l+=2e3:l<100&&(l+=1900):(l<543&&(l+=2500),l-=543);var c=n[f[5]];if(typeof c!="number")return null;var h=f[1];h=parseInt(h);var p=l+"-"+(c+1)+"-"+h,a=moment(p,"YYYY-MM-DD");if(a.format("YYYY-M-D")!=p)return null}else{f=r.match(t);if(!f)return null;var r=f[0];r=f[0].substr(0,f[0].length-f[6].length),originalText=r;var c=n[f[5]];if(typeof c!="number")return null;var h=f[1];h=parseInt(h);var p=c+1+"-"+h,a=moment(p,"MM-DD");if(a.format("M-D")!=p)return null;a.year(moment(i).year());var d=a.clone().add("y",1),v=a.clone().add("y",-1);Math.abs(d.diff(moment(i)))<Math.abs(a.diff(moment(i)))?a=d:Math.abs(v.diff(moment(i)))<Math.abs(a.diff(moment(i)))&&(a=v)}if(f[4]){var m=parseInt(f[4]),g=parseInt(f[1]),y=a.clone();return a.date(g),y.date(m),a.format("D")!=f[1]?null:y.format("D")!=f[4]?null:new chrono.ParseResult({referenceDate:i,text:originalText,index:s,start:{day:a.date(),month:a.month(),year:a.year()},end:{day:y.date(),month:y.month(),year:y.year()}})}return new chrono.ParseResult({referenceDate:i,text:originalText,index:s,start:{day:a.date(),month:a.month(),year:a.year()}})},o}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/([0-9]{1,2})(\s*(ถึง|\-)?\s*([0-9]{1,2}))?\s+(มกราคม|ม.ค.|กุมภาพัน|ก.พ.|มีนาคม|มี.ค.|เมษายน|เม.ย.|พฤษภาคม|พ.ค.|มิถุนายน|ม.ย.|มิ.ย.|กรกฎาคม|ก.ค.|สิงหาคม|ส.ค.|กันยายน|ก.ย.|ตุลาคม|ต.ค.|พฤศจิกายน|พ.ย.|ธันวาคม|ธ.ค.)(พ.ศ.|ค.ศ.)?(\s+[0-9]{2,4})(\W|$)/i,t=/([0-9]{1,2})(\s*(ถึง|\-)?\s*([0-9]{1,2}))?\s+(มกราคม|ม.ค.|กุมภาพัน|ก.พ.|มีนาคม|มี.ค.|เมษายน|เม.ย.|พฤษภาคม|พ.ค.|มิถุนายน|ม.ย.|มิ.ย.|กรกฏาคม|ก.ค.|สิงหาคม|ส.ค.|กันยายน|ก.ย.|ตุลาคม|ต.ค.|พฤศจิกายน|พ.ย.|ธันวาคม|ธ.ค.)(\W|$)/i,n={"มกราคม":0,"ม.ค.":0,"กุมภาพัน":1,"ก.พ.":1,"มีนาคม":2,"มี.ค.":2,"เมษายน":3,"เม.ย.":4,"พฤษภาคม":4,"พ.ค.":4,"มิถุนายน":5,"มิ.ย.":5,"กรกฎาคม":6,"ก.ค.":6,"สิงหาคม":7,"ส.ค.":7,"กันยายน":8,"ก.ย.":8,"ตุลาคม":9,"ต.ค.":9,"พฤศจิกายน":10,"พ.ย.":10,"ธันวาคม":11,"ธ.ค.":11};chrono.parsers.THMonthNameLittleEndianParser=r}(),function(){function t(t,n,r){r=r||{},n=n||new Date;var i=chrono.Parser(t,n,r);i.pattern=function(){return e},i.extract=function(t,r){var s=this.results(),o=s[s.length-1];if(o&&r<o.index+o.text.length)return null;var u=t.substr(r).match(e);if(u==null){finished=!0;return}var a=u[0].toLowerCase();a=u[0].substr(0,u[0].length-u[3].length);var f=null;if(a=="今日")f=moment(n).clone();else if(a=="明日")f=moment(n).clone().add("d",1);else if(a=="昨日")f=moment(n).clone().add("d",-1);else{var l=u[2];l=parseInt(l),f=moment(n).clone().add("d",-l)}var c=new chrono.ParseResult({referenceDate:n,text:a,index:r,start:{day:f.date(),month:f.month(),year:f.year()}}),h=i.extractTime(t,c);return c=h||c,c};var s=i.extractTime;return i.extractTime=function(e,t){var n=s.call(this,e,t);if(n)return n;var r=/\s*(午前|午後)?\s*([0-9]{1,2})時?(([0-9]{1,2})分)?/i;if(e.length<=t.index+t.text.length)return null;e=e.substr(t.index+t.text.length);var i=e.match(r);if(!i||e.indexOf(i[0])!=0)return null;var o=0,u=0,a=i[2];a=parseInt(a);if(i[1]){if(a>12)return null;i[1]=="午後"&&(a+=12)}if(i[4]){o=i[4],o=parseInt(o);if(o>=60)return null}return t.text=t.text+i[0],t.start.hour==undefined&&(t.start.hour=a,t.start.minute=o,t.start.second=u),t.end&&t.end.hour==undefined&&(t.end.hour=a,t.end.minute=o,t.end.second=u),new chrono.ParseResult(t)},i}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/(今日|昨日|明日|([1-9]+)\s*日前)(\W|$)/i;chrono.parsers.JPGeneralDateParser=t}(),function(){function t(e){var t=e;return t=t.replace(/０/g,"0"),t=t.replace(/１/g,"1"),t=t.replace(/２/g,"2"),t=t.replace(/３/g,"3"),t=t.replace(/４/g,"4"),t=t.replace(/５/g,"5"),t=t.replace(/６/g,"6"),t=t.replace(/７/g,"7"),t=t.replace(/８/g,"8"),t=t.replace(/９/g,"9"),t}function n(n,r,i){i=i||{},r=r||new Date;var s=chrono.parsers.JPGeneralDateParser(n,r,i);s.pattern=function(){return e},s.extract=function(n,i){var o=this.results(),u=o[o.length-1];if(u&&i<u.index+u.text.length)return null;var a=n.substr(i).match(e);if(a==null){finished=!0;return}var f=a[0].toLowerCase(),l=null;f=a[0];var c=a[5];c=t(c),c=parseInt(c);if(!c||c==NaN)return null;var h=a[6];h=t(h),h=parseInt(h);if(!h||h==NaN)return null;var p=a[4];p&&(p=t(p),p=parseInt(p));if(p&&p!==NaN){a[3]=="平成"?p+=1989:p<100&&(p+=2e3);var d=p+"-"+c+"-"+h;l=moment(d,"YYYY-MM-DD");if(l.format("YYYY-M-D")!=d)return null}else{var d=c+"-"+h;l=moment(d,"MM-DD"),l.year(moment(r).year());var v=l.clone().add("y",1),m=l.clone().add("y",-1);Math.abs(v.diff(moment(r)))<Math.abs(l.diff(moment(r)))?l=v:Math.abs(m.diff(moment(r)))<Math.abs(l.diff(moment(r)))&&(l=m)}var g=new chrono.ParseResult({referenceDate:r,text:f,index:i,start:{day:l.date(),month:l.month(),year:l.year()}}),y=s.extractTime(n,g);return g=y||g,g};var o=s.extractTime;return s.extractTime=function(e,t){var n=/(\,|\(|（|\s)*(月|火|水|木|金|土|日)(曜日|曜)?\s*(\,|）|\))/i;if(e.length<=t.index+t.text.length)return null;var r=e.substr(t.index+t.text.length),i=r.match(n);return i&&r.indexOf(i[0])==0&&(t.text=t.text+i[0]),o.call(this,e,t)},s}if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var e=/(同|((平成)?([0-9０-９]{2,4}))年)?\s*([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i;chrono.parsers.JPStandardDateParser=n}();